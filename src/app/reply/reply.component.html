<div class="container">
  <div class="row menu">
    <div class="col-2 principal">
      <span class="imageClass" (click)="redirectToNews()">
        <img src="../../assets/images/logo.png" style="border: 1px white solid; height:25px; width:25px">
      </span>
      <span class="title" (click)="redirectToNews()"> Add comment</span>
    </div>
  </div>
  <div class="row content">
    <div class="col-12">
      <div class="row" style="color:#F6F6F0;">.</div>
      <div class="row contributioninfo">
        <div class="col-1 vote">
          <span *ngIf="logged; else notLoggedVote">
            <span class="imageClass vote"  *ngIf="contribution.isvoted; else notVoted" >
              <img src="../../assets/images/downvote.png" (click)="unvote(contribution.id)" style="height:10px; width:10px;">
            </span>
            <ng-template #notVoted>
              <span class="imageClass vote">
                <img src="../../assets/images/upvote.png" (click)="vote(contribution.id)" style="height:10px; width:10px;">
              </span>          
            </ng-template>
          </span>
          <ng-template #notLoggedVote>
            <span class="imageClass vote">
              <img src="../../assets/images/upvote.png" (click)="redirectToLogin()" style="height:10px; width:10px;">
            </span> 
          </ng-template>
        </div>
        <div class="col contributioninfo">
          <div class="row contributiondetails">
            <div class="col contributiondetailsitem">
              <a (click)="redirectToUserInfo(contribution.useremail)">{{contribution.username}}</a>
            </div>
            <div class="col contributiondetailsitem">&nbsp;</div>
            <div class="col contributiondetailsitem">
              <a class="age" (click)="redirectToContributionInfo(contribution.id)">
                {{contribution.created_at | dateAgo}}
              </a>
            </div>
            <div class="col contributiondetailsitem">&nbsp;|&nbsp;</div>
            <div class="col contributiondetailsitem">
              <a (click)="redirectToContributionInfo(contribution.contribution_id)">parent</a>
            </div>
            <div class="col contributiondetailsitem">&nbsp;|&nbsp;</div>
            <div class="col contributiondetailsitem">
              <a (click)="redirectToContributionInfo(contributionGodfather.id)">on: {{contributionGodfather.title}}</a>
            </div>
          </div>
          <div class="row contributioncontent">
            <div class="col">
              {{contribution.content}}
            </div>
          </div>
        </div>
      </div>
      <div class="row commentbox" *ngIf="logged">
        <form [formGroup]="commentForm" (ngSubmit)="onSubmit()">
          <div class="row">
            <div class="col-1 fieldname"> </div>
            <div class="col fieldvalue" style="color:#F6F6F0">.</div>
          </div>
          <div class="row">
            <div class="col-1 fieldname"> </div>
            <div class="col fieldvalue">
              <textarea
              style="border-radius:2em;"
              type="textarea" 
              class="form-control" 
              id="comment" 
              formControlName="comment"
              placeholder= "leave your comment here"
              name="comment"
              ></textarea>
            </div>
          </div>
          <div class="row" *ngIf="logged">
            <div class="col-1 fieldname"> </div>
            <div class="col fieldvalue">
              <button class="actions submitbutton" type="submit" value="submit">reply</button>  <!-- <%if (logged_in?) && current_user.id == @user.id %> -->        
            </div>
          </div>
          <div class="row">
            <div class="col-1 fieldname"> </div>
            <div class="col fieldvalue" style="color:#F6F6F0">
              Leave url blank to submit a question for discussion. If there is no url, the text (if any) will appear at the top of the thread. You can also submit via bookmarklet.
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
